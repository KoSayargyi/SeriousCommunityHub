<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{index::head}">
    <meta charset="UTF-8">
    <title>User Profile</title>
    <style>
        .gradient-custom-2 {
            background: #fbc2eb;
            background: -webkit-linear-gradient(to right, rgba(251, 194, 235, 1), rgba(166, 193, 238, 1));
            background: linear-gradient(to right, rgba(251, 194, 235, 1), rgba(166, 193, 238, 1))
        }
        .edit-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .edit-button:hover {
            opacity: 1;
        }
        .profile-container {
            min-width: 300px; /* add a default width */
            margin: 0 auto; /* center the container */
        }
    </style>
</head>
<body>
<div th:replace="~{index::header}"></div>
<div th:replace="~{index::navbar}"></div>
<main id="main" class="main">
    <section class="h-100 gradient-custom-2">
        <div class="container py-5 h-100">
            <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="col col-lg-9 col-xl-7">
                    <div class="card profile-container">
                        <div class="rounded-top text-white d-flex flex-row" style="height:200px;" onclick="showbgModal()" id="profile-background" >
                            <img id="profile-background-img" src="/assets/img/pf-bg1.gif" style="position: absolute; top: 0; left: 0; width: 100%; height: 200px; object-fit: cover; " alt="pf-bg">                        <div class="ms-4 mt-5 d-flex flex-column" style="width: 150px;">
                            <img id="profile-photo" src="/assets/img/default-logo.png" alt="Profile" class="img-fluid img-thumbnail mt-4 mb-2"
                                 style="width: 150px; z-index: 1; border-radius: 20px; min-height: 160px;" th:if="${user.photo == null}">
                            <img  th:unless="${user.photo == null}" th:src="${user.photo}" alt="Profile" class="img-fluid img-thumbnail mt-4 mb-2"
                                  style="width: 150px; z-index: 1; border-radius: 20px; min-height: 160px;" />
                        </div>
                            <div class="ms-3" style="">
                                <h5 th:text="${user.name}" >Name</h5>
                                <p th:text="${user.role}">Role</p>
                            </div>
                        </div>
                        <div class="p-4 text-black" style="background-color: #f8f9fa;">
                            <div class="d-flex justify-content-end text-center py-1">
                            </div>
                        </div>
                        <div class="card-body p-4 text-black">
                            <div class="mb-5">
                                <p class="lead fw-normal mb-1">About</p>
                                <div class="p-4" style="background-color: #f8f9fa;">
                                    <p class="font-italic mb-1">
                                        <strong>Name:</strong> <span th:text="${user.name}?: 'Not provided'"></span>
                                    </p>
                                    <p class="font-italic mb-1">
                                        <strong>Date of Birth:</strong> <span th:text="${user.dob}?: 'Not provided'"></span>
                                    </p>
                                    <p class="font-italic mb-1">
                                        <strong>Email:</strong> <span th:text="${user.email}?: 'Not provided'"></span>
                                    </p>
                                    <p class="font-italic mb-1">
                                        <strong>Phone:</strong> <span th:text="${user.phone}?: 'Not provided'"></span>
                                    </p>
                                    <p class="font-italic mb-1">
                                        <strong>Gender:</strong> <span th:text="${user.gender}?: 'Not provided'"></span>
                                    </p>
                                    <button id="seeMoreBtn" class="btn btn-link" style="margin-left: -18px; text-decoration: none; color: black;">See more...</button>
                                    <div id="moreUserInfo" style="display: none;">
                                        <p class="font-italic mb-1">
                                            <strong>Department:</strong> <span th:text="${user.dept}?: 'Not provided'"></span>
                                        </p>
                                        <p class="font-italic mb-1">
                                            <strong>Division:</strong> <span th:text="${user.division}?: 'Not provided'"></span>
                                        </p>
                                        <p class="font-italic mb-1">
                                            <strong>Team:</strong> <span th:text="${user.team}?: 'Not provided'"></span>
                                        </p>
                                        <p class="font-italic mb-1">
                                            <strong>Role:</strong> <span th:text="${user.role}?: 'Not provided'"></span>
                                        </p>
                                        <p class="font-italic mb-1" >
                                            <strong>Skills:</strong>
                                        <div th:each="userSkill : ${userSkills}">
                                            <span th:text="${userSkill.skill.name}">Skill Name</span>
                                            <span th:text="${userSkill.experience}" style="margin-left: 100px" >Experience</span><span> years</span>
                                        </div>
                                        </p>
                                        <strong>Hobbies:</strong>
                                        <span th:text="${user.hobby}" id="hobbies" hidden="hidden"></span>
                                        <div id="hobbiesContainer"></div>
                                    </div>
                                </div>
                                <div id="user-post-div">
                            </div>
                        
                    </div>
                </div>
            </div>
        </div>
        </div>
    </section>


    </div>

  <!-- post edit offcanvas start -->

  <div class="offcanvas offcanvas-end" data-bs-scroll="true" tabindex="-1" id="postEditOffcanvas" aria-labelledby="offcanvasWithBothOptionsLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title font-monospace m-2" id="offcanvasWithBothOptionsLabel">Edit Post</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
       
               <div class="modal-body" id="editModal">
                   ...
               </div>  
                   <button type="button" onclick="getUpdateData()"   class="btn btn-primary"
                   data-bs-dismiss="offcanvas"  aria-label="Close"  >Update
                   </button>

            
       </div>
   </div>


  <!-- post edit offcanvas end  -->

    <div class="modal fade  " id="loadingModalBox" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
   <div class="modal-dialog">
       <div class="modal-content border rounded-1">

           <div id="markBox" class="hidden">
               <div class="check_mark">
                   <div class="sa-icon sa-success animate">
                       <span class="sa-line sa-tip animateSuccessTip"></span>
                       <span class="sa-line sa-long animateSuccessLong"></span>
                       <div class="sa-placeholder"></div>
                       <div class="sa-fix"></div>
                   </div>
               </div>
               <div>
                   <button id="restart" class="btn btn-success offset-10" data-bs-dismiss="modal"
                           onclick="setToNormal()">OK
                   </button>
               </div>
           </div>

           <div id="catBox" class="">
               <div class="box">
                   <div class="cat">
                       <div class="cat__body"></div>
                       <div class="cat__body"></div>
                       <div class="cat__tail"></div>
                       <div class="cat__head"></div>
                   </div>
               </div>
           </div>


       </div>
   </div>
</div>


<!-- loading modal box end  -->
</main>


<div th:replace="~{index::footer}"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.4/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script src="/static/assets/js/userDetail.js"></script>
<script>
    document.getElementById('seeMoreBtn').addEventListener('click', function() {
        const moreUserInfo = document.getElementById('moreUserInfo');
        const seeMoreBtn = document.getElementById('seeMoreBtn');

        if (moreUserInfo.style.display === 'none') {
            // Show more user information
            moreUserInfo.style.display = 'block';
            seeMoreBtn.textContent = 'See less';
        } else {
            // Hide more user information
            moreUserInfo.style.display = 'none';
            seeMoreBtn.textContent = 'See more...';
        }
        const hobbyIcons = {
            "Reading": "<i class='fas fa-book' style='color: #4a86e8;'></i>",
            "Hiking": "<i class='fas fa-hiking' style='color: #f6b26b;'></i>",
            "Cooking": "<i class='fas fa-utensils' style='color: #e55039;'></i>",
            "Gardening": "<i class='fas fa-seedling' style='color: #8bc34a;'></i>",
            "Writing": "<i class='fas fa-pen' style='color: #673ab7;'></i>",
            "Photography": "<i class='fas fa-camera' style='color: #9e9e9e;'></i>",
            "Coding": "<i class='fas fa-laptop-code' style='color: #607d8b;'></i>",
            "Drawing": "<i class='fas fa-draw-polygon' style='color: #ff9800;'></i>",
            "Swimming": "<i class='fas fa-swimmer' style='color: #00bcd4;'></i>",
            "Gaming": "<i class='fas fa-gamepad' style='color: #4caf50;'></i>",
            "Painting": "<i class='fas fa-paint-brush' style='color: #9c27b0;'></i>",
            "Traveling": "<i class='fas fa-globe-americas' style='color: #795548;'></i>",
            "Cycling": "<i class='fas fa-bicycle' style='color: #607d8b;'></i>",
            "Camping": "<i class='fas fa-campground' style='color: #ff9800;'></i>",
            "Fishing": "<i class='fas fa-fish' style='color: #00bcd4;'></i>",
            "Birdwatching": "<i class='fas fa-binoculars' style='color: #4caf50;'></i>",
            "Meditation": "<i class='fas fa-meditate' style='color: #9c27b0;'></i>",
            "Music": "<i class='fas fa-music' style='color: #795548;'></i>",
            "Jogging": "<i class='fas fa-running' style='color: #4a86e8;'></i>",
            "Sports": "<i class='fas fa-futbol' style='color: #f6b26b;'></i>",
            "Crafts": "<i class='fas fa-craft' style='color: #e55039;'></i>",
            "Sewing": "<i class='fas fa-scissors' style='color: #8bc34a;'></i>",
            "Crochet": "<i class='fas fa-crop' style='color: #673ab7;'></i>",
            "Acting": "<i class='fas fa-theater-masks' style='color: #9e9e9e;'></i>"
        };
        const hobbiesString = document.getElementById("hobbies").textContent;
        console.log(hobbiesString)
        const hobbiesContainer = document.getElementById("hobbiesContainer");
        hobbiesContainer.innerHTML = displayHobbiesWithIcons(hobbiesString);

        function displayHobbiesWithIcons(hobbiesString) {
            const hobbies = hobbiesString.split(',');
            let html = "";
            hobbies.forEach(hobby => {
                const icon = hobbyIcons[hobby.trim()];
                if (icon) {
                    html += `<div>${icon} ${hobby.trim()}</div>`;
                }
            });
            return html;
        }
    });
</script>
</body>
</html>


